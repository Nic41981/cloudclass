# 在线教育平台后台API文档
***
## 目录
- [用户部分](#用户部分)
    1. [用户注册](#1用户注册)
    2. [用户登录](#2用户登录)
    3. [自动登录](#3自动登录)
- [教师个人中心-课程部分](#教师个人中心-课程部分)
    1. [教师课程列表](#1教师课程列表)
    2. [新建课程](#2新建课程)
    3. [修改课程](#3修改课程)
    4. [删除课程](#4删除课程)
- [教师个人中心-章节部分](#教师个人中心-章节部分)
    1. [教师章节列表](#1教师章节列表)
    2. [新建章节](#2新建章节)
    3. [修改章节](#3修改章节)
    4. [删除章节](#4删除章节)
- [教师个人中心-统计部分](#教师个人中心-统计部分)
    1. [选课情况](#1选课情况)
- [期末考试部分](#期末考试部分)
    1. [创建期末试卷](#1创建期末试卷)
    2. [获取期末试卷](#2获取期末试卷)
    3. [提交期末试卷](#3提交期末试卷)
    4. [查询期末成绩](#4查询期末成绩)
- [章节测试部分](#章节测试部分)
    1. [创建章节试卷](#1创建章节试卷)
    2. [获取章节试卷](#2获取章节试卷)
    3. [提交章节试卷](#3提交章节试卷)
    4. [查询章节成绩](#4查询章节成绩)
- [文件部分](#文件部分)
    1. [课程封面上传](#1课程封面上传)
    2. [章节视频上传](#2章节视频上传)
    3. [获取文件信息](#3获取文件信息)
    4. [文件静态资源](#4文件静态资源)
***
## 用户部分
### 1.用户注册
URL:_http://39.107.102.246/user/register_

请求方式:_POST_

请求参数样例:
```json5
{
	"name":"test",
	"password":"123456",
	"email":"test@qq.com"
}
```
成功返回样例:
```json5
{
    "status": 0,
    "msg": "注册成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|用户名已存在|
|-1|该邮箱已注册|
|-3|缺少参数|
### 2.用户登录
URL:_http://39.107.102.246/user/login_

请求方式:_POST_

请求参数样例:
```json5
{
	"name":"test",
	"password":"123456",
	"autoLogin":true
}
//autoLogin参数可选,默认为false
```
成功返回样例:
```json5
{
    "status": 0,
    "msg": "登录成功",
    "data": {
        "name": "test",
        "identity": 0,
        "email": "test@qq.com"
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-2|用户名或密码错误|
|-3|缺少参数|
### 3.自动登录
URL:_http://39.107.102.246/user/login/auto_

请求方式:_POST_

请求参数样例:_无_

成功返回样例:
```json5
{
    "status": 0,
    "msg": "登陆成功",
    "data": {
        "name": "test",
        "identity": 0,
        "email": "test@qq.com"
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-2|登录失败|
|-3|缺少参数|
## 教师个人中心-课程部分
### 1.教师课程列表
URL:_http://39.107.102.246/teacher/course/list_

请求方式:_GET_

请求参数样例:无

成功返回样例:
```json5
{
    "status": 0,
    "msg": "查询成功",
    "data": [
        {
            "id": "81f88387543743328b30d7b299f33c01",
            "name": "API开发",
            "image": "0478f16dfa5946a887ecb3b6610d8074",
            "teacher": "16ca842a3d034ea69d69d60228536b66",
            "tag": "web;API;开发",
            "finalExam": "d4daf49c80cb4e548b9711720c319bcb"
        }
    ]
}
```
失败信息:

|status|msg|
|:----:|---|
|-2|用户未登录|
|-2|权限不足|
### 2.新建课程
URL:_http://39.107.102.246/teacher/course_

请求方法:_POST_

请求参数样例:
```json5
{
	"name":"API开发",
	"tag":"web;API;开发"
}
```
成功返回样例:
```json5
{
    "status": 0,
    "msg": "创建成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|创建失败|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
### 3.修改课程
URL:_http://39.107.102.246/teacher/course/{课程ID}_

请求方法:_PUT_

请求参数样例:
```json5
{
	"name":"API开发",
	"tag":"web;API;开发"
}
//所有参数均为可选参数,但request body必须要有JSON结构
```
成功返回样例:
```json5
{
    "status": 0,
    "msg": "更新成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|更新失败|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
|-4|课程不存在|
### 4.删除课程
URL:_http://39.107.102.246/teacher/course/{课程ID}_

请求方法:_DELETE_

请求参数样例:_无_

返回成功样例:
```json5
{
    "status": 0,
    "msg": "删除成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|删除失败|
|-2|用户未登录|
|-2|权限不足|
|-4|课程不存在|
## 教师个人中心-章节部分
### 1.教师章节列表
详见[章节列表](#章节列表)
### 2.创建章节
URL:_http://39.107.102.246/teacher/chapter_

请求方法:_POST_

请求参数样例:
```json5
{
	"num":1,
	"course":"82ca0f2515624098b269341ea15db3a4",
	"name":"API第一课",
	"info":"API第一课"
}
//num参数可选,默认追加章节
```

返回成功样例:
```json5
{
    "status": 0,
    "msg": "创建成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|创建失败|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
|-4|课程不存在|
### 3.修改章节
URL:_http://39.107.102.246/teacher/chapter/{章节ID}_

请求方法:_PUT_

请求参数样例:
```json5
{
	"name":"API第一课",
	"info":"API第一课"
}
//所有参数均为可选参数,但request body必须要有JSON结构
```

返回成功样例:
```json5
{
    "status": 0,
    "msg": "更新成功"
}
```

失败信息:

|status|msg|
|:----:|---|
|-1|更新失败|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
|-4|章节不存在|
|-4|课程不存在|
### 4.删除章节
URL:_http://39.107.102.246/teacher/chapter/{章节ID}_

请求方法:_DELETE_

请求参数样例:_无_

返回成功样例:
```json5
{
    "status": 0,
    "msg": "删除成功"
}
```

失败信息:

|status|msg|
|:----:|---|
|-1|删除失败|
|-2|用户未登录|
|-2|权限不足|
|-4|章节不存在|
|-4|课程不存在|
## 教师个人中心-统计部分
### 1.选课情况
URL:_http://39.107.102.246/teacher/statistics/student_

请求方法:_GET_

请求参数样例:_?course=82ca0f2515624098b269341ea15db3a4_

返回成功样例:
```json5
{
    "status": 0,
    "msg": "查询成功",
    "data": {
        "total": 4,
        "nameList": [
            "nic",
            "15699999999",
            "15610492887",
            "redefault"
        ]
    }
}
```

失败信息:

|status|msg|
|:----:|---|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
|-4|课程不存在|
## 期末考试部分
### 1.创建期末试卷
URL:_http://39.107.102.246/exam/final_

请求方法:_POST_

请求参数样例:
```json5
{
	"name":"API开发期末考试",
	"course":"81f88387543743328b30d7b299f33c01",
	"startTime":"2019-04-20 07:00:00",
	"stopTime":"2019-04-20 09:00:00",
	"choiceList":[
		{
			"question":"一天有多少小时?",
			"score":5,
			"optionList":[
				"5小时",
				"10小时",
				"20小时",
				"24小时"
				],
			"answer":"24小时"
		},
		{
			"question":"一小时有多少分钟?",
			"score":5,
			"optionList":[
				"10分钟",
				"30分钟",
				"60分钟",
				"90分钟"
				],
			"answer":"60分钟"
		}
		],
	"judgementList":[
		{
			"question":"青岛工学院是双一流大学.",
			"score":5,
			"answer":"false"
		},
		{
			"question":"BTA指的是百度,腾讯和阿里爸爸.",
			"score":5,
			"answer":"true"
		}
		]
}
//考试开始时间必须在当前时间之前,在结束时间之后,时长在5分钟至24小时之间
```
返回成功样例:
```json5
{
    "status": 0,
    "msg": "创建成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|创建失败|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
|-4|考试时间错误|
|-4|课程不存在|
|-4|有效题目不足|
### 2.获取期末试卷
URL:_http://39.107.102.246/exam/final/{考试ID}_

请求方法:_GET_

请求参数样例:_无_

返回成功样例:
```json5
{
    "status": 0,
    "msg": "查询成功",
    "data": {
        "name": "API开发期末考试",
        "choiceList": [
            {
                "id": 1,
                "question": "一天有多少小时?",
                "score": 5,
                "optionList": [
                    "10小时",
                    "20小时",
                    "5小时",
                    "24小时"
                ]
            },
            {
                "id": 2,
                "question": "一小时有多少分钟?",
                "score": 5,
                "optionList": [
                    "90分钟",
                    "60分钟",
                    "10分钟",
                    "30分钟"
                ]
            }
        ],
        "judgementList": [
            {
                "id": 4,
                "question": "BTA指的是百度,腾讯和阿里爸爸.",
                "score": 5
            },
            {
                "id": 3,
                "question": "青岛工学院是双一流大学.",
                "score": 5
            }
        ],
        "startTime": "2019-04-20 07:00:00",
        "stopTime": "2019-04-20 09:00:00"
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-2|用户未登录|
|-2|未参加学习|
|-4|考试不存在|
|-4|课程不存在|
|-4|不在考试时间|
### 3.提交期末试卷
URL:_http://39.107.102.246/exam/final/{考试ID}_

请求方法:_POST_

请求参数样例:
```json5
{
	"choiceList":[
		{
			"id":1,
			"answer":"24小时"
		},
		{
			"id":2,
			"answer":"60分钟"
		}
		],
	"judgementList":[
		{
			"id":3,
			"answer":false
		},
		{
			"id":4,
			"answer":true
		}
		]
}
```
返回成功样例:
```json5
{
    "status": 0,
    "msg": "提交成功",
    "data": {
        "exam": "d4daf49c80cb4e548b9711720c319bcb",
        "score": 20
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|提交失败|
|-2|用户未登录|
|-2|未参加学习|
|-4|考试不存在|
|-4|课程不存在|
|-4|不在考试时间|
|-4|不可重复提交|
### 4.查询期末成绩
URL:_39.107.102.246/exam/score/{考试ID}_

请求方法:_GET_

请求参数样例:_无_

返回成功样例:
```json5
{
    "status": 0,
    "msg": "暂无成绩"
}
{
    "status": 0,
    "msg": "查询成功",
    "data": {
        "exam": "d4daf49c80cb4e548b9711720c319bcb",
        "score": 20
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-2|用户未登录|
|-2|未参加学习|
|-4|考试不存在|
|-4|课程不存在|
## 章节测试部分
### 1.创建章节试卷
URL:_http://39.107.102.246/exam/chapter_

请求方法:_POST_

请求参数样例:
```json5
{
	"chapter":"6c87779f2dcb4588a7fbe3bb42d925b5",
	"name":"第一章测试",
	"choiceList":[
		{
			"question":"一天有多少小时?",
			"score":5,
			"optionList":[
				"5小时",
				"10小时",
				"20小时",
				"24小时"
				],
			"answer":"24小时"
		},
		{
			"question":"一小时有多少分钟?",
			"score":5,
			"optionList":[
				"10分钟",
				"30分钟",
				"60分钟",
				"90分钟"
				],
			"answer":"60分钟"
		}
		],
	"judgementList":[
		{
			"question":"青岛工学院是双一流大学.",
			"score":5,
			"answer":"false"
		},
		{
			"question":"BTA指的是百度,腾讯和阿里爸爸.",
			"score":5,
			"answer":"true"
		}
		]
}
```
返回成功样例:
```json5
{
    "status": 0,
    "msg": "创建成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|创建失败|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
|-4|课程不存在|
|-4|章节不存在|
|-4|有效题目不足|
### 2.获取章节试卷
URL:_http://39.107.102.246/exam/chapter/{考试ID}_

请求方法:_GET_

请求参数样例:_无_

返回成功样例:
```json5
{
    "status": 0,
    "msg": "查询成功",
    "data": {
        "name": "第一章测试",
        "choiceList": [
            {
                "id": 9,
                "question": "一天有多少小时?",
                "score": 5,
                "optionList": [
                    "20小时",
                    "5小时",
                    "24小时",
                    "10小时"
                ]
            },
            {
                "id": 10,
                "question": "一小时有多少分钟?",
                "score": 5,
                "optionList": [
                    "60分钟",
                    "10分钟",
                    "90分钟",
                    "30分钟"
                ]
            }
        ],
        "judgementList": [
            {
                "id": 12,
                "question": "BTA指的是百度,腾讯和阿里爸爸.",
                "score": 5
            },
            {
                "id": 11,
                "question": "青岛工学院是双一流大学.",
                "score": 5
            }
        ]
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-2|用户未登录|
|-2|未参加学习|
|-4|考试不存在|
|-4|课程不存在|
|-4|章节不存在|
### 3.提交章节试卷
URL:_http://39.107.102.246/exam/final/{考试ID}_

请求方法:_POST_

请求参数样例:
```json5
{
	"choiceList":[
		{
			"id":1,
			"answer":"24小时"
		},
		{
			"id":2,
			"answer":"60分钟"
		}
		],
	"judgementList":[
		{
			"id":3,
			"answer":false
		},
		{
			"id":4,
			"answer":true
		}
		]
}
```
返回成功样例:
```json5
{
    "status": 0,
    "msg": "提交成功",
    "data": {
        "exam": "0ae6c94c1e1f4507832405d50ff065b0",
        "score": 20
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|提交失败|
|-2|用户未登录|
|-2|未参加学习|
|-4|考试不存在|
|-4|课程不存在|
|-4|章节不存在|
### 4.查询章节成绩
URL:_39.107.102.246/exam/score/{考试ID}_

请求方法:_GET_

请求参数样例:_无_

返回成功样例:
```json5
{
    "status": 0,
    "msg": "查询成功",
    "data": {
        "exam": "0ae6c94c1e1f4507832405d50ff065b0",
        "score": 20
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-2|用户未登录|
|-2|未参加学习|
|-4|考试不存在|
|-4|课程不存在|
|-4|章节不存在|
## 文件部分
### 1.课程封面上传
URL:_http://39.107.102.246/upload/course/image_

请求方法:_POST(multipart/form-data)_

请求参数样例:

|参数名|参数类型|参数值|
|:----:|:-----:|-----|
|course|text|81f88387543743328b30d7b299f33c01|
|image|file|image.jpg|
返回成功样例:
```json5
{
    "status": 0,
    "msg": "上传成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|上传失败|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
|-4|课程不存在|
|-4|不支持的文件类型|
### 2.章节视频上传
URL:_http://39.107.102.246/upload/chapter/video_

请求方法:_POST(multipart/form-data)_

请求参数样例:

|参数名|参数类型|参数值|
|:----:|:-----:|-----|
|chapter|text|81f88387543743328b30d7b299f33c01|
|video|file|video.mp4|
返回成功样例:
```json5
{
    "status": 0,
    "msg": "上传成功"
}
```
失败信息:

|status|msg|
|:----:|---|
|-1|上传失败|
|-2|用户未登录|
|-2|权限不足|
|-3|缺少参数|
|-4|课程不存在|
|-4|章节不存在|
|-4|不支持的文件类型|
### 3.获取文件信息
URL:_http://39.107.102.246/files/info_

请求方法:_GET_

请求参数样例:_?file=0478f16dfa5946a887ecb3b6610d8074_

返回成功样例:
```json5
{
    "status": 0,
    "msg": "查询成功",
    "data": {
        "id": "0478f16dfa5946a887ecb3b6610d8074",
        "mappingPath": "/files/image/course/81f88387543743328b30d7b299f33c01/",
        "realName": "程序员",
        "suffix": "png"
    }
}
```
失败信息:

|status|msg|
|:----:|---|
|-3|缺少参数|
|-4|文件不存在|
### 4.文件静态资源
URL:_http://39.107.102.246{文件mappingPath}{文件ID}.{文件后缀名}_

请求方法:_GET_

请求参数样例:_无_

返回成功样例:_文件资源_

失败信息:_无_